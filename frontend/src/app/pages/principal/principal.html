<div class="principal-container">
  <!-- NAVBAR (contenido varÃ­a segÃºn estado de sesiÃ³n) -->
  <nav class="navbar">
    <div class="logo">
      <img src="assets/logo.png" alt="Nutrichef IA">
      <span>Nutrichef IA</span>
    </div>

    <!-- BotÃ³n Hamburguesa para Mobile -->
    <button class="menu-mobile-toggle" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- MenÃº Desktop -->
    <ul class="nav-links">
      <!-- MenÃº para NO logueados -->
      <ng-container *ngIf="!isLoggedIn(); else loggedMenu">
        <li><a routerLink="/recetas">RECETAS</a></li>
        <li><a (click)="scrollToSection('sobre-nosotros')">SOBRE NOSOTROS</a></li>
        <li><a routerLink="/login">INICIO DE SESIÃ“N</a></li>
      </ng-container>
      <!-- MenÃº para LOGUEADOS: solo Recetas, Sobre nosotros y Cerrar sesiÃ³n -->
      <ng-template #loggedMenu>
        <li><a routerLink="/recetas">RECETAS</a></li>
        <li><a (click)="scrollToSection('sobre-nosotros')">SOBRE NOSOTROS</a></li>
        <li><button class="btn-logout" (click)="onLogout()">CERRAR SESIÃ“N</button></li>
      </ng-template>
    </ul>

    <!-- Overlay para cerrar menÃº mÃ³vil -->
    <div class="menu-overlay" 
         [class.active]="isMobileMenuOpen" 
         (click)="closeMobileMenu()">
    </div>

    <!-- MenÃº MÃ³vil Compacto -->
    <div class="menu-mobile-compact" [class.active]="isMobileMenuOpen">
      <div class="mobile-menu-content">
        <a class="mobile-menu-item" routerLink="/recetas" (click)="closeMobileMenu()">
          ğŸ“– RECETAS
        </a>
        <a class="mobile-menu-item" routerLink="/analisis-imagen" (click)="closeMobileMenu()">
          ğŸ“¸ ANÃLISIS IMAGEN
        </a>
        <a class="mobile-menu-item" routerLink="/chat-ia" (click)="closeMobileMenu()">
          ğŸ’¬ CHAT IA
        </a>
        <a class="mobile-menu-item" (click)="scrollToSection('sobre-nosotros'); closeMobileMenu()">
          ğŸ‘¥ SOBRE NOSOTROS
        </a>
        <a *ngIf="!isLoggedIn()" class="mobile-menu-item" routerLink="/login" (click)="closeMobileMenu()">
          ğŸ” INICIO DE SESIÃ“N
        </a>
        <a *ngIf="isLoggedIn()" class="mobile-menu-item logout-link" (click)="onLogout(); closeMobileMenu()">
          ğŸšª CERRAR SESIÃ“N
        </a>
      </div>
    </div>
  </nav>

  <!-- Mensaje de Bienvenida Personalizado (solo si NO estÃ¡ logueado) -->
  <div *ngIf="!isLoggedIn() && welcomeMessage && !isLoadingUser" class="welcome-banner">
    <div class="welcome-content">
      <h2>{{ welcomeMessage }}</h2>
      <p *ngIf="currentUser?.profile?.nombre || currentUser?.profile?.nombre_completo">
        Â¡Esperamos que disfrutes explorando nuevas recetas hoy!
      </p>
      <p *ngIf="!currentUser?.profile?.nombre && !currentUser?.profile?.nombre_completo">
        Â¡Te recomendamos completar tu perfil para una experiencia mÃ¡s personalizada!
      </p>
    </div>
  </div>

  <!-- Loading del usuario -->
  <div *ngIf="isLoadingUser" class="welcome-loading">
    <div class="loading-spinner"></div>
    <p>Cargando informaciÃ³n del usuario...</p>
  </div>

  <!-- CONTENIDO PRINCIPAL (solo si NO estÃ¡ logueado) -->
  <main class="main-content" *ngIf="!isLoggedIn()">
    <h1>Descubre recetas deliciosas y saludables ğŸ½ï¸</h1>
    <p>
      Deja que <strong>Nutrichef IA</strong> te inspire con ideas Ãºnicas para cuidar tu cuerpo y disfrutar cada bocado.
    </p>

    <!-- VIDEO PROMOCIONAL -->
    <div class="video-container">
      <video controls>
        <source src="assets/nutrichef-demo.mp4" type="video/mp4">
        Tu navegador no soporta videos HTML5.
      </video>
    </div>

    <!-- GRID DE RECETAS -->
    <div class="recetas-grid">
      <div class="receta-card">
        <img src="https://images.unsplash.com/photo-1589302168068-964664d93dc0?auto=format&fit=crop&w=600&q=80" alt="Ensalada con Pollo">
        <h3>Ensalada de Quinoa</h3>
        <p>Ligera, nutritiva y perfecta para el almuerzo. Rica en proteÃ­nas y fibra.</p>
      </div>

      <div class="receta-card">
        <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?auto=format&fit=crop&w=600&q=80" alt="Smoothie Verde Detox">
        <h3>Smoothie Verde Detox</h3>
        <p>Ideal para comenzar el dÃ­a con vitalidad y energÃ­a natural.</p>
      </div>

      <div class="receta-card">
        <img src="https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=500" alt="Pasta Integral">
        <h3>Pasta Integral con Verduras</h3>
        <p>Una mezcla deliciosa de sabor y salud con ingredientes frescos.</p>
      </div>
    </div>

    <button class="discover-btn" routerLink="/recetas">Descubrir mÃ¡s recetas</button>
  </main>

  <!-- VISTA PARA USUARIOS LOGUEADOS: solo Chat IA y AnÃ¡lisis de ImÃ¡genes -->
  <section *ngIf="isLoggedIn()" class="logged-in-actions">
    <div class="actions-container">
      <!-- Banner de bienvenida con el mismo estilo que el anterior -->
      <div *ngIf="welcomeMessage && !isLoadingUser" class="welcome-banner">
        <div class="welcome-content">
          <h2>{{ welcomeMessage }}</h2>
        </div>
      </div>
      <!-- Hero con logo y tÃ­tulo "Nutrichef IA" -->
      <div class="hero">
        <img src="assets/logo.png" alt="Nutrichef IA" class="hero-logo" />
        <h1 class="hero-title">Nutrichef IA</h1>
      </div>
      <h2 class="tools-title">Accede a tus herramientas IA</h2>
      <div class="actions-grid">
        <a class="action-card" routerLink="/chat-ia">
          
          <h3>Chat IA</h3>
          <p>Consulta a tu asistente nutricional en tiempo real.</p>
        </a>
        <a class="action-card" routerLink="/analisis-imagen">
          
          <h3>AnÃ¡lisis de ImÃ¡genes</h3>
          <p>Detecta alimentos y obtÃ©n informaciÃ³n nutricional.</p>
        </a>
      </div>
    </div>
  </section>

  <!-- SOBRE NOSOTROS (visible para todos; navegable desde el menÃº) -->
  <section id="sobre-nosotros" class="sobre-nosotros-container">
    <div class="contenido">
      <h1>Sobre Nosotros ğŸ²</h1>
      <p>
        En <strong>Nutrichef IA</strong> unimos lo mejor de la tecnologÃ­a y la nutriciÃ³n para transformar tu experiencia en la cocina. 
        Gracias a nuestra inteligencia artificial, podemos ofrecerte recetas personalizadas que se adaptan a tus gustos, necesidades y objetivos 
        de salud.
      </p>
      <p>
        Creemos que comer bien no deberÃ­a ser complicado ni aburrido, por eso diseÃ±amos soluciones rÃ¡pidas, deliciosas y equilibradas 
        que inspiran a cuidar tu cuerpo y tu mente. Cada receta es una oportunidad para aprender, disfrutar y crear hÃ¡bitos saludables que perduren 
        en el tiempo.
      </p>
      <p>
        Con <strong>Nutrichef IA</strong>, cocinar se convierte en un placer, y alimentarte bien nunca fue tan fÃ¡cil y motivador.
      </p>

      <p class="contacto">
        ğŸ“ ContÃ¡ctanos al: <strong>+591 76432109</strong>
      </p>
    </div>
  </section>

  <!-- TOAST NOTIFICATION -->
  <div *ngIf="successMessage" class="toast-notification">
    <div class="toast-content">
      <span class="toast-icon">âœ…</span>
      <span class="toast-text">{{ successMessage }}</span>
      <button class="toast-close" (click)="closeMessage()">Ã—</button>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-content">
    <!-- Logo y descripciÃ³n -->
    <div class="footer-logo">
      <img src="assets/logo.png" alt="Nutrichef IA">
      <div class="footer-logo-text">
        <h3>Nutrichef IA</h3>
        <p>Inspirando salud y sabor con inteligencia artificial ğŸ</p>
      </div>
    </div>

    <!-- Redes sociales -->
    <div class="footer-redes">
      <h4>SÃ­guenos</h4>
      <div class="social-icons">
        <a href="https://www.facebook.com/profile.php?id=61580220210686" target="_blank" aria-label="NutriChef - Facebook">
          <img src="assets/facebook.svg" alt="Facebook">
        </a>
        <a href="https://www.instagram.com/nutrichefcito/" target="_blank" aria-label="NutriChef - Instagram">
          <img src="assets/instagram.svg" alt="Instagram">
        </a>
      </div>
    </div>

    <!-- Contacto -->
    <div class="footer-contacto">
      <h4>ContÃ¡ctanos</h4>
      <p>ğŸ“§ nutrichef66@gmail.com</p>
      <p>ğŸ“ +591 76432109</p>
      <p>ğŸ“ Cochabamba, Bolivia</p>
    </div>
  </div>

  <div class="footer-bottom">
    <p>Â© 2025 Nutrichef IA â€” Todos los derechos reservados</p>
  </div>
</footer>