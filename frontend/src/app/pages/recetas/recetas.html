<div class="principal-container">
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="logo">
      <img src="assets/logo.png" alt="Nutrichef IA">
      <span>Nutrichef IA</span>
    </div>

    <!-- Bot칩n Hamburguesa para Mobile -->
    <button class="menu-mobile-toggle" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Men칰 Desktop -->
<ul class="nav-links">
  <!-- Conservamos INICIO -->
  <li><a routerLink="/principal">INICIO</a></li>

  <!-- Men칰 para NO logueados -->
  <ng-container *ngIf="!isLoggedIn(); else loggedMenu">
    <li><a routerLink="/recetas">RECETAS</a></li>
    <li><a routerLink="/login">INICIO DE SESI칍N</a></li>
  </ng-container>

  <!-- Men칰 para LOGUEADOS -->
  <ng-template #loggedMenu>
    <li><a routerLink="/chat-ia">CHAT IA</a></li>
    <li><a routerLink="/analisis-imagen">AN츼LISIS IMAGEN</a></li>
    <li><a routerLink="/recetas">RECETAS</a></li>
    <li>
      <button class="btn-logout" (click)="onLogout()">CERRAR SESI칍N</button>
    </li>
  </ng-template>
</ul>


    <!-- Overlay para cerrar men칰 m칩vil -->
    <div class="menu-overlay" 
         [class.active]="isMobileMenuOpen" 
         (click)="closeMobileMenu()">
    </div>

    <!-- Men칰 M칩vil Compacto -->
    <div class="menu-mobile-compact" [class.active]="isMobileMenuOpen">
      <div class="mobile-menu-content">
        <a class="mobile-menu-item" routerLink="/principal" (click)="closeMobileMenu()">
          游 INICIO
        </a>
        <a class="mobile-menu-item" routerLink="/analisis-imagen" (click)="closeMobileMenu()">
          游닞 AN츼LISIS IMAGEN
        </a>
        <a class="mobile-menu-item" routerLink="/chat-ia" (click)="closeMobileMenu()">
          游눫 CHAT IA
        </a>
        <a *ngIf="!isLoggedIn()" class="mobile-menu-item" routerLink="/login" (click)="closeMobileMenu()">
          游댏 INICIO DE SESI칍N
        </a>
        <a *ngIf="isLoggedIn()" class="mobile-menu-item logout-link" (click)="onLogout(); closeMobileMenu()">
          游뛁 CERRAR SESI칍N
        </a>
      </div>
    </div>
  </nav>

  <div class="recetas-container">
    <header class="recetas-header">
      <h1>TODAS NUESTRAS RECETAS</h1>
      <p class="subtitle">Explora nuestra completa colecci칩n de recetas inteligentes.</p>
    </header>

    <div class="recipes-grid" *ngIf="recipes.length > 0">
      <div class="recipe-card" *ngFor="let recipe of recipes">
        <img [src]="recipe.imagen_url || 'assets/default-recipe.jpg'" [alt]="recipe.nombre" class="recipe-image">
        <div class="recipe-content">
          <h2 class="recipe-title">{{ recipe.nombre }}</h2>
          <span class="recipe-category">{{ recipe.categoria || 'Sin categor칤a' }}</span>
          <p class="recipe-description">{{ recipe.descripcion || 'Sin descripci칩n' }}</p>
          <div class="recipe-meta">
            <span><i class="fas fa-clock"></i> {{ recipe.tiempo_preparacion }} min</span>
            <span><i class="fas fa-fire"></i> {{ recipe.calorias_totales }} kcal</span>
          </div>
          <button class="btn-ver-mas" (click)="openModal(recipe)">Ver m치s</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="selectedRecipe" [class.fade-out]="closing" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()" [class.slide-out]="closing">
      <button class="close-btn" (click)="closeModal()">칑</button>
      <div class="modal-scroll">
        <img [src]="selectedRecipe.imagen_url || 'assets/default-recipe.jpg'" [alt]="selectedRecipe.nombre" class="modal-image">
        <h2>{{ selectedRecipe.nombre }}</h2>
        <p><strong>Categor칤a:</strong> {{ selectedRecipe.categoria }}</p>
        <p><strong>Descripci칩n:</strong> {{ selectedRecipe.descripcion }}</p>
        <p><strong>Tiempo de preparaci칩n:</strong> {{ selectedRecipe.tiempo_preparacion }} min</p>
        <p><strong>Calor칤as totales:</strong> {{ selectedRecipe.calorias_totales }} kcal</p>
        <h4>Ingredientes:</h4>
        <ul>
          <li *ngFor="let ingrediente of selectedRecipe.ingredientes">{{ ingrediente }}</li>
        </ul>
        <h4>Instrucciones:</h4>
        <p style="white-space: pre-wrap;">{{ selectedRecipe.instrucciones }}</p>
      </div>
    </div>
  </div>
</div>